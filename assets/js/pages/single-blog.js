document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector("header.sticky, .sticky-header"),t=e?e.offsetHeight:0,o=document.querySelectorAll(".toc-link");o.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const o=this.getAttribute("href").substring(1),n=document.getElementById(o);if(n){const e=n.getBoundingClientRect().top+window.pageYOffset-t-20;window.scrollTo({top:e,behavior:"smooth"})}}))}));const n=document.querySelectorAll("h2[id], h3[id]"),c=new IntersectionObserver((e=>{e.forEach((e=>{const t=e.target.getAttribute("id"),n=document.querySelector(`.toc-link[href="#${t}"]`);e.isIntersecting&&(o.forEach((e=>e.querySelector(".line-link-el").classList.remove("line-link-el-active"))),n&&n.querySelector(".line-link-el").classList.add("line-link-el-active"))}))}),{root:null,rootMargin:`-${t}px 0px 0px 0px`,threshold:.1});n.forEach((e=>c.observe(e))),window.addEventListener("unload",(()=>{n.forEach((e=>c.unobserve(e)))}))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector("header.sticky, .sticky-header"),t=e?e.offsetHeight:0,o=document.querySelectorAll(".toc-link");o.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const o=this.getAttribute("href").substring(1),n=document.getElementById(o);if(n){const e=n.getBoundingClientRect().top+window.pageYOffset-t-20;window.scrollTo({top:e,behavior:"smooth"})}}))}));const n=document.querySelectorAll("h2[id], h3[id]"),c=new IntersectionObserver((e=>{e.forEach((e=>{const t=e.target.getAttribute("id"),n=document.querySelector(`.toc-link[href="#${t}"]`);e.isIntersecting&&(o.forEach((e=>e.querySelector(".line-link-el").classList.remove("line-link-el-active"))),n&&n.querySelector(".line-link-el").classList.add("line-link-el-active"))}))}),{root:null,rootMargin:`-${t}px 0px 0px 0px`,threshold:.1});function s(e,t="success"){const o=document.createElement("div");o.className="fixed z-[9999] bottom-5 right-5 p-4 rounded-lg shadow-lg z-50 transition-opacity duration-300 opacity-0 "+("success"===t?"bg-success-light text-success":"bg-error-light text-error"),o.textContent=e,document.body.appendChild(o),setTimeout((()=>o.classList.add("opacity-100")),100),setTimeout((()=>{o.classList.remove("opacity-100"),setTimeout((()=>o.remove()),300)}),5e3)}n.forEach((e=>c.observe(e))),window.addEventListener("unload",(()=>{n.forEach((e=>c.unobserve(e)))}));const r=document.getElementById("tt-post-comment-form");r&&r.addEventListener("submit",(function(e){e.preventDefault();const t=new FormData(r),o=Object.fromEntries(t.entries());wpAjax("submit_comment",o,(function(e,t,o){let n=e||(o&&o.success?o:null);if(n){if(s(n.message||"Operation successful","success"),n.moderation);else if(n.html){const e=document.getElementById("comments-list")||document.querySelector(".tt-comments-list ul");if(e){e.insertAdjacentHTML("beforeend",n.html);const t=document.getElementById("comment-"+n.comment_id);t&&t.scrollIntoView({behavior:"smooth"})}if(n.comments_count){const e=document.querySelector("#comments h2");e&&(e.textContent=n.comments_count+(1===n.comments_count?" Comment":" Comments"))}}r.reset()}else s(t?t.message||"An error occurred.":"Unexpected response from server.","error")}))}))}));
